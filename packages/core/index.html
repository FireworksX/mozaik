<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Time travel</title>
  </head>
  <body>
    <div id="app">
      <h1>{{ userStore.name }}</h1>
    </div>

    <script src="build/mozaikjs.umd.js"></script>
    <script>
      const { types, onSnapshot } = core

      const commentModel = types
        .model('comment', {
          isLiked: types.boolean
        })
        .actions({
          toggleLike({ dispatch, state }) {
            dispatch({
              isLiked: true
            })
          }
        })

      const fetcher = types
        .model({
          comments: types.array(commentModel)
        })
        .create({
          comments: [
            {
              isLiked: false
            }
          ]
        })

      onSnapshot(fetcher, state => {
        console.log(state);
      })

      fetcher.comments[0].$subscribe(console.log)

      fetcher.comments[0].toggleLike()
    </script>
  </body>
</html>
