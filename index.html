<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <style>
      body {
        background: #222222;
      }
      .nav {
        padding: 20px;
      }

      a {
        padding: 15px;
        background: #eee;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="nav">
      <a href="/home">Home</a>
      <a href="/about">About</a>
      <a href="/faq">FAQ</a>
    </div>

    <div class="path"></div>
    <ul class="list"></ul>

    <script src="dist/mozaik.js"></script>
    <script>
      const { types, applySnapshot } = Mozaik

      const userStore = types.model({
        role: types.custom((value) => ['admin', 'moderator', 'guest'].includes(value))
      }).create({
        role: 'admin'
      })

      console.log(userStore);

      const router = types
        .model({
          history: types.array(types.string),
          path: types.string
        })
        .actions(({ dispatch, getState }) => ({
          push(path) {
            dispatch({
              path,
              history: [...getState().history, path]
            })
          },
          replace(path) {
            const history = getState().history
            history.splice(history.length - 1, 1, path)
            dispatch({
              path,
              history
            })
          }
        }))
        .create({
          history: ['/'],
          path: '/'
        })

      console.log(router.$getState());

    </script>
  </body>
</html>
